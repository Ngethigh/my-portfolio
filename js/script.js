const translations = {
    en: {
        nav_home: "Home",
        nav_about: "About",
        nav_projects: "QA Project",
        nav_contact: "Contact",
        nav_coding: "Coding Projects",
        nav_shop: "Mini Shop",
        nav_lotto: "Lotto Random",
        hero_hello: "Hello, I'm",
        hero_role: "Automation QA Robot Framework and Cypress",
        btn_view_work: "View Work",
        btn_contact_me: "Contact Me",
        section_about: "About Me",
        about_title: "Passionate about Automation",
        about_desc: "I am a tester automation frameworks using Robot Framework and Cypress. I have a keen eye for detail and a drive to optimize testing processes. My experience covers web automation, API testing, and ensuring software quality through efficient automated solutions.",
        section_projects: "My QA Projects",
        proj1_title: "Automation Test",
        proj1_desc: "End-to-end registration automation script using Robot Framework with Page Object Model and Cypress for Test E2E UX/UI",
        btn_view_code: "View Code <i class=\"fas fa-arrow-right\"></i>",
        proj3_title: "Web Usage Handbook",
        proj3_desc: "Comprehensive guides for users and admins to effectively use the website.",
        btn_view_handbook: "View Handbooks <i class=\"fas fa-arrow-right\"></i>",
        modal_handbook_title: "Select a Guide",
        section_contact: "Get In Touch",
        contact_hiring: "If you are interested in hiring me, please feel free to send a message.",
        ph_name: "Name",
        ph_email: "Email",
        ph_message: "Message",
        btn_send: "Send Message",
        lang_btn: "TH",
        modal_success_title: "Message Sent!",
        modal_success_msg: "Thank you for contacting me. I will get back to you shortly.",
        lotto_title: "Lotto Randomizer",
        lotto_desc: "Try your luck!",
        lotto_p1: "Prize 1 (6 Digits)",
        lotto_last3: "Last 3 Digits",
        lotto_last2: "Last 2 Digits",
        shop_title: "Mini Shop",
        shop_desc: "Simulated E-commerce Demo",
        shop_cart: "Cart",
        shop_add: "Add to Cart",
        back_home: "Back to Home",
        nav_others: "Other Works",
        nav_novels: "Novels",
        nav_store: "Everything Store",
        novels_page_title: "My Creative Writing",
        novels_page_desc: "Selected stories and web novels from ReadAwrite.",
        btn_read_now: "Read Now <i class='fas fa-external-link-alt'></i>",
        chicken_title: "Kuroyuki Menu",
        chicken_desc: "The best fried chicken in town, served with our secret recipes. ShiniFuyu Shipper.",
        chicken_menu_orig: "Original Recipe",
        chicken_menu_spicy: "Kuroyuki Spicy",
        chicken_menu_garlic: "Garlic Butter",
        chicken_menu_soy: "Soy Garlic",
        chicken_order: "Add to Basket",
        nav_drinks: "Drinks Shop",
        drinks_title: "Ship-Pairing Drinks",
        drinks_desc: "Refreshing drinks inspired by your favorite pairs.",
        drink_kasayuki: "KasaYuki (Sour)",
        drink_shinifuyu: "ShiniFuyu (Sweet)",
        btn_view_drinks: "View Drinks Section",
        btn_view_food: "View Food Section"
    },
    th: {
        nav_home: "หน้าแรก",
        nav_about: "เกี่ยวกับฉัน",
        nav_projects: "ผลงาน QA",
        nav_contact: "ติดต่อ",
        nav_coding: "การเขียนโค้ด",
        nav_shop: "ร้านค้าจำลอง",
        nav_lotto: "สุ่มเลขเด็ด",
        hero_hello: "สวัสดีครับ ผมชื่อ",
        hero_role: "ผู้เชี่ยวชาญด้าน Automation QA, Robot Framework และ Cypress",
        btn_view_work: "ดูผลงาน",
        btn_contact_me: "ติดต่อฉัน",
        section_about: "เกี่ยวกับผม",
        about_title: "มุ่งมั่นในงาน Automation",
        about_desc: "ผมเป็น Automation Tester ที่เชี่ยวชาญการใช้ Robot Framework และ Cypress ผมให้ความสำคัญกับรายละเอียดและมุ่งมั่นที่จะพัฒนากระบวนการทดสอบให้ดียิ่งขึ้น ประสบการณ์ของผมครอบคลุมทั้ง Web Automation, API Testing และการรับประกันคุณภาพซอฟต์แวร์ด้วยโซลูชันอัตโนมัติที่มีประสิทธิภาพ",
        section_projects: "ผลงาน QA ของผม",
        proj1_title: "ระบบทดสอบอัตโนมัติ",
        proj1_desc: "สคริปต์ทดสอบการลงทะเบียนแบบ End-to-end โดยใช้ Robot Framework (POM) และ Cypress สำหรับทดสอบ UX/UI",
        btn_view_code: "ดูโค้ด <i class=\"fas fa-arrow-right\"></i>",
        proj3_title: "คู่มือการใช้งานเว็บ",
        proj3_desc: "คู่มือรวมสำหรับการใช้งานและการจัดการระบบเว็บไซด์อย่างละเอียด",
        btn_view_handbook: "ดูคู่มือ <i class=\"fas fa-arrow-right\"></i>",
        modal_handbook_title: "เลือกรายการคู่มือ",
        section_contact: "ติดต่อเรา",
        contact_hiring: "หากคุณสนใจอยากติดต่อจ้างงานผม สามารถส่งข้อความมาได้",
        ph_name: "ชื่อ",
        ph_email: "อีเมล",
        ph_message: "ข้อความ",
        btn_send: "ส่งข้อความ",
        lang_btn: "ZH",
        modal_success_title: "ได้รับข้อความแล้ว!",
        modal_success_msg: "ขอบคุณที่ติดต่อมาครับ ผมจะรีบตอบกลับให้เร็วที่สุดครับ",
        lotto_title: "สุ่มเลขเด็ด",
        lotto_desc: "เสี่ยงดวงกันหน่อยไหม?",
        lotto_p1: "รางวัลที่ 1 (6 หลัก)",
        lotto_last3: "เลขท้าย 3 ตัว",
        lotto_last2: "เลขท้าย 2 ตัว",
        shop_title: "ร้านค้าจำลอง",
        shop_desc: "เดโมระบบร้านค้าออนไลน์",
        shop_cart: "ตะกร้า",
        shop_add: "หยิบใส่ตะกร้า",
        back_home: "กลับหน้าแรก",
        nav_others: "งานอื่น ๆ",
        nav_novels: "งานนิยาย",
        nav_store: "ขายทุกอย่าง store",
        novels_page_title: "งานเขียนแนวสร้างสรรค์",
        novels_page_desc: "รวบรวมผลงานนิยายที่เขียนลงบน ReadAwrite",
        btn_read_now: "อ่านเลย <i class='fas fa-external-link-alt'></i>",
        chicken_title: "เมนู Kuroyuki",
        chicken_desc: "ไก่ทอดสูตรลับความอร่อยระดับตำนาน ShiniFuyu Shipper.",
        chicken_menu_orig: "สูตรดั้งเดิม",
        chicken_menu_spicy: "เผ็ดซี้ด Kuroyuki",
        chicken_menu_garlic: "เนยกระเทียมพรีเมียม",
        chicken_menu_soy: "ซอสถั่วเหลืองกระเทียม",
        chicken_order: "หยิบใส่ตะกร้า",
        nav_drinks: "ร้านน้ำ",
        drinks_title: "เมนูน้ำคู่จิ้น",
        drinks_desc: "เครื่องดื่มสุดสดชื่นที่ได้รับแรงบันดาลใจจากคู่จิ้นสุดฮอต",
        drink_kasayuki: "KasaYuki (รสเปรี้ยวซ่า)",
        drink_shinifuyu: "ShiniFuyu (รสหวานฉ่ำ)",
        btn_view_drinks: "ไปดูเมนูน้ำ",
        btn_view_food: "ไปดูเมนูของคาว"
    },
    zh: {
        nav_home: "首页",
        nav_about: "关于我",
        nav_projects: "QA 项目",
        nav_contact: "联系我",
        nav_coding: "编程项目",
        nav_shop: "迷你商店",
        nav_lotto: "随机乐透",
        hero_hello: "你好，我是",
        hero_role: "自动化 QA 专家 (Robot Framework & Cypress)",
        btn_view_work: "查看作品",
        btn_contact_me: "联系我",
        section_about: "关于我",
        about_title: "热衷于自动化",
        about_desc: "我是一名使用 Robot Framework 和 Cypress 的自动化测试工程师。我注重细节，并致力于优化测试流程。我的经验涵盖 Web 自动化、API 测试，以及通过高效的自动化解决方案确保软件质量。",
        section_projects: "我的 QA 项目",
        proj1_title: "自动化测试",
        proj1_desc: "使用 Robot Framework (POM) 和 Cypress 进行端到端注册自动化脚本测试。",
        btn_view_code: "查看代码 <i class=\"fas fa-arrow-right\"></i>",
        proj3_title: "网站使用手册",
        proj3_desc: "为用户和管理员提供的详细网站使用指南。",
        btn_view_handbook: "查看手册 <i class=\"fas fa-arrow-right\"></i>",
        modal_handbook_title: "选择指南",
        section_contact: "取得联系",
        contact_hiring: "如果您有兴趣雇佣我，请随时发送消息。",
        ph_name: "姓名",
        ph_email: "电子邮件",
        ph_message: "消息内容",
        btn_send: "发送消息",
        lang_btn: "JA",
        modal_success_title: "消息已发送！",
        modal_success_msg: "感谢您的联系，我会尽快回复您。",
        lotto_title: "随机乐透",
        lotto_desc: "碰碰运气吧！",
        lotto_p1: "一等奖 (6 位数)",
        lotto_last3: "后 3 位数",
        lotto_last2: "后 2 位数",
        shop_title: "迷你商店",
        shop_desc: "模拟电子商务演示",
        shop_cart: "购物车",
        shop_add: "加入购物车",
        back_home: "回到首页",
        nav_others: "其他作品",
        nav_novels: "小说",
        nav_store: "万货商店",
        novels_page_title: "我的创意写作",
        novels_page_desc: "ReadAwrite 上的精选故事和网络小说。",
        btn_read_now: "立即阅读 <i class='fas fa-external-link-alt'></i>",
        chicken_title: "黒雪菜单",
        chicken_desc: "城里最好的炸鸡，配上我们的秘密食谱。ShiniFuyu Shipper.",
        chicken_menu_orig: "原味炸鸡",
        chicken_menu_spicy: "秘制辣味",
        chicken_menu_garlic: "蒜泥奶油",
        chicken_menu_soy: "蒜香酱油",
        chicken_order: "加入篮子",
        nav_drinks: "饮料店",
        drinks_title: "CP 饮品",
        drinks_desc: "受你最喜欢的配对启发的清爽饮品。",
        drink_kasayuki: "KasaYuki (酸味)",
        drink_shinifuyu: "ShiniFuyu (甜味)",
        btn_view_drinks: "查看饮料区",
        btn_view_food: "查看食品区"
    },
    ja: {
        nav_home: "ホーム",
        nav_about: "私について",
        nav_projects: "QA プロジェクト",
        nav_contact: "お問い合わせ",
        nav_coding: "コーディング項目",
        nav_shop: "ミニショップ",
        nav_lotto: "ロト・ランダム",
        hero_hello: "こんにちは、私は",
        hero_role: "自動化 QA (Robot Framework & Cypress)",
        btn_view_work: "作品を見る",
        btn_contact_me: "連絡する",
        section_about: "私について",
        about_title: "自動化への情熱",
        about_desc: "私は Robot Framework と Cypress を使用する自動化テスターです。細部にこだわり、テストプロセスの最適化に努めています。経験は Web 自動化、API テスト、効率的な自動化ソリューションによる品質保証に及びます。",
        section_projects: "私の QA プロジェクト",
        proj1_title: "自動化テスト",
        proj1_desc: "Robot Framework (POM) と Cypress を使用したエンドツーエンドの登録自動化テスト。",
        btn_view_code: "コードを見る <i class=\"fas fa-arrow-right\"></i>",
        proj3_title: "ウェブ利用ガイド",
        proj3_desc: "ユーザーと管理者のための詳細なウェブサイト利用ガイド。",
        btn_view_handbook: "ガイドを見る <i class=\"fas fa-arrow-right\"></i>",
        modal_handbook_title: "ガイドを選択",
        section_contact: "お問い合わせ",
        contact_hiring: "採用にご興味がある場合は、お気軽にご連絡ください。",
        ph_name: "お名前",
        ph_email: "メールアドレス",
        ph_message: "メッセージ",
        btn_send: "送信する",
        lang_btn: "EN",
        modal_success_title: "送信完了！",
        modal_success_msg: "お問い合わせありがとうございます。すぐにご連絡いたします。",
        lotto_title: "ロト・ランダム",
        lotto_desc: "運試しをしてみませんか？",
        lotto_p1: "1等賞 (6 桁)",
        lotto_last3: "下 3 桁",
        lotto_last2: "下 2 桁",
        shop_title: "ミニショップ",
        shop_desc: "シミュレートされた Eコマースデモ",
        shop_cart: "カート",
        shop_add: "カートに追加",
        back_home: "ホームに戻る",
        nav_others: "その他の活動",
        nav_novels: "小説",
        nav_store: "何でも屋ストア",
        novels_page_title: "クリエイティブ・ライティング",
        novels_page_desc: "ReadAwrite の厳選された物語やライトノベル。",
        btn_read_now: "今すぐ読む <i class='fas fa-external-link-alt'></i>",
        chicken_title: "黒雪メニュー",
        chicken_desc: "町の最高のフライドチキン、秘密のレシピをご提供します。ShiniFuyu Shipper.",
        chicken_menu_orig: "オリジナルレシピ",
        chicken_menu_spicy: "黒雪スパイシー",
        chicken_menu_garlic: "ガーリックバター",
        chicken_menu_soy: "醤油ガーリック",
        chicken_order: "バスケットに追加",
        nav_drinks: "ドリンクショップ",
        drinks_title: "カップリング・ドリンク",
        drinks_desc: "お気に入りのペアにインスパイアされた爽やかなドリンク。",
        drink_kasayuki: "KasaYuki (酸っぱい)",
        drink_shinifuyu: "ShiniFuyu (甘い)",
        btn_view_drinks: "ドリンクコーナーを見る",
        btn_view_food: "フードコーナーを見る"
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // Contact Form Logic
    const contactForm = document.getElementById('contactForm');
    const modal = document.getElementById('successModal');
    const modalCloseBtn = document.getElementById('modalCloseBtn');

    if (contactForm) {
        contactForm.addEventListener('submit', function (e) {
            e.preventDefault();

            // Get values
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;

            // Simple validation
            if (!name || !email || !message) {
                alert('Please fill in all fields');
                return;
            }

            // Prepare data
            const formData = {
                name: name,
                email: email,
                message: message
            };

            // Simulate sending (Fake)
            const submitBtn = contactForm.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.innerHTML;

            // Show loading state
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            submitBtn.disabled = true;

            setTimeout(() => {
                // Save to localStorage
                const messages = JSON.parse(localStorage.getItem('portfolio_messages') || '[]');
                messages.push({
                    name: name,
                    email: email,
                    message: message,
                    date: new Date().toLocaleString()
                });
                localStorage.setItem('portfolio_messages', JSON.stringify(messages));

                // Restore button
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;

                // Show Success Modal directly
                showModal();
                contactForm.reset();
            }, 1500); // 1.5 seconds delay
        });
    }

    // Modal Logic
    function showModal() {
        modal.style.display = 'flex';
        // Small delay to allow display flex to apply before adding show class for opacity transition
        setTimeout(() => {
            modal.classList.add('show');
        }, 10);
    }

    function closeModal() {
        modal.classList.remove('show');
        setTimeout(() => {
            modal.style.display = 'none';
        }, 300); // Wait for transition
    }

    if (modalCloseBtn) {
        modalCloseBtn.addEventListener('click', closeModal);
    }

    // Close modal when clicking outside content
    window.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModal();
        }
        if (e.target === handbookModal) {
            closeHandbookModal();
        }
    });

    // Handbook Modal Logic
    const handbookBtn = document.getElementById('handbookBtn');
    const handbookModal = document.getElementById('handbookModal');
    const handbookCloseBtn = document.getElementById('handbookCloseBtn');

    function openHandbookModal(e) {
        if (e) e.preventDefault();
        handbookModal.style.display = 'flex';
        setTimeout(() => {
            handbookModal.classList.add('show');
        }, 10);
    }

    function closeHandbookModal() {
        handbookModal.classList.remove('show');
        setTimeout(() => {
            handbookModal.style.display = 'none';
        }, 300);
    }

    if (handbookBtn) {
        handbookBtn.addEventListener('click', openHandbookModal);
    }

    if (handbookCloseBtn) {
        handbookCloseBtn.addEventListener('click', closeHandbookModal);
    }

    // Language Switcher Logic
    let currentLang = localStorage.getItem('lang') || 'en';

    function updateLanguage(lang) {
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                element.innerHTML = translations[lang][key]; // innerHTML to handle icons
            }
        });

        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            if (translations[lang] && translations[lang][key]) {
                element.setAttribute('placeholder', translations[lang][key]);
            }
        });

        // Update current language button text
        const langText = document.getElementById('current-lang-text');
        if (langText) {
            langText.textContent = lang.toUpperCase();
        }

        localStorage.setItem('lang', lang);
        currentLang = lang;
    }

    // Global function to be called from HTML
    window.changeLanguage = function (lang) {
        updateLanguage(lang);
    };

    // Initialize Language
    updateLanguage(currentLang);

    // Navbar Scroll Effect
    const navbar = document.querySelector('.navbar');

    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
            navbar.style.background = 'rgba(5, 5, 5, 0.95)';
            navbar.style.boxShadow = '0 2px 20px rgba(0,0,0,0.5)';
        } else {
            navbar.style.background = 'rgba(5, 5, 5, 0.85)';
            navbar.style.boxShadow = 'none';
        }
    });

    // Smooth Scroll for Anchor Links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });

    // Mobile Menu Toggle
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');

    hamburger.addEventListener('click', () => {
        navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
        hamburger.classList.toggle('active');

        if (navLinks.style.display === 'flex') {
            navLinks.style.flexDirection = 'column';
            navLinks.style.position = 'absolute';
            navLinks.style.top = '70px';
            navLinks.style.left = '0';
            navLinks.style.width = '100%';
            navLinks.style.background = 'var(--nav-bg)';
            navLinks.style.padding = '2rem';
            navLinks.style.borderBottom = '1px solid var(--card-border)';
        }
    });

    // Intersection Observer for Scroll Animations
    const observerOptions = {
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    document.querySelectorAll('section').forEach(section => {
        section.classList.add('hidden-section');
        observer.observe(section);
    });
});

// Add dynamic class for sections
const style = document.createElement('style');
style.textContent = `
    .hidden-section {
        opacity: 0;
        transform: translateY(50px);
        transition: all 0.8s ease-out;
    }
    .visible {
        opacity: 1;
        transform: translateY(0);
    }
`;
document.head.appendChild(style);
